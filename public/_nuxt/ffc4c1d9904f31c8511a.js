(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{447:function(t,e,n){"use strict";var r={name:"SearchButton",data:function(){return{searchValue:""}}},o=n(7),component=Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-form",{attrs:{inline:""}},[n("label",{staticClass:"sr-only",attrs:{for:"searchValue"}},[t._v("searchValue")]),t._v(" "),n("b-input",{staticClass:"mr-sm-2",staticStyle:{"line-height":"1"},attrs:{id:"searchValue",placeholder:"Search by name",size:"sm"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.$eventBus.$emit("searchAgentName",t.searchValue))}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),t._v(" "),n("b-button",{staticClass:"my-2 my-sm-0",attrs:{size:"sm",variant:"outline-success"},on:{click:function(e){return e.preventDefault(),t.$eventBus.$emit("searchAgentName",t.searchValue)}}},[t._v("\n    Search\n  ")])],1)},[],!1,null,"d3275cac",null);e.a=component.exports},462:function(t,e,n){},605:function(t,e,n){"use strict";var r=n(462);n.n(r).a},613:function(t,e,n){"use strict";n.r(e);n(23),n(48),n(64),n(10),n(24),n(8),n(187);var r=n(0),o=(n(6),n(50)),c={name:"RankTable",components:{SearchButton:n(447).a},props:{dataColumnName:{type:String,default:"Owned"},getData:{type:Function,default:function(t){return"undefined"}},agentsProp:{type:Array,default:null},isPagination:{type:Boolean,default:!1},perPage:{type:Number,default:10}},data:function(){return{sortKey:"data",sortOrder:{rarity:-1,name:-1,data:-1},searchedValue:"",currentPage:1}},computed:Object(r.a)({},Object(o.c)({getCards:"modules/playerAgents/getCards",getCardInfo:"modules/cards/getCardInfo"}),{OwnedCards:function(){return this.getCards("player1")},sorted:function(){return this.agents.slice(0).sort(this.comparatorFactory(this)).filter(this.filterNameTestFactory(this.searchedValue))},curSortOrder:function(){return this.sortOrder[this.sortKey]},agents:function(){return this.agentsProp?this.agentsProp:Object.values(this.$store.state.modules.playerAgents.agents)},player:function(){return this.$store.state.modules.playerAgents.agents.player1},user:function(){return this.$store.state.user},rows:function(){return this.agents.length},pageData:function(){if(!this.isPagination)return this.sorted;var t=(this.currentPage-1)*this.perPage,e=Math.min(this.rows,t+this.perPage);return this.generator(this.sorted,t,e,1)},offset:function(){return(this.currentPage-1)*this.perPage}}),created:function(){var t=this;this.$eventBus.$on("searchAgentName",function(e){t.searchedValue=e})},methods:{highlight_class:function(t){return{"table-warning":!!this.player&&t===this.player.name}},comparatorFactory:function(t){return"name"===t.sortKey?function(a,b){a=a.name,b=b.name;return(a.length>b.length?1:a.length<b.length?-1:a===b?0:a>b?1:-1)*t.curSortOrder}:"data"===t.sortKey?function(a,b){return((a=t.getData(a))===(b=t.getData(b))?0:a>b?1:-1)*t.curSortOrder}:function(a,b){return 0}},getRarity:function(t){return this.getCardInfo(t).rarity},getArrowClass:function(t){return{"sort-activate":this.sortKey===t,asc:this.sortOrder[t]>0,dsc:this.sortOrder[t]<=0}},changeSortOrder:function(t){this.sortKey===t&&(this.sortOrder[t]=-1*this.sortOrder[t]),this.sortKey=t},getOwnedCount:function(t){return this.OwnedCards[t]},filterNameTestFactory:function(t){return function(e){return!t||e.name.match(new RegExp(t,"i"))}},generator:regeneratorRuntime.mark(function t(){var e,n,r,o,i,c=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=c.length>0&&void 0!==c[0]?c[0]:[],n=c.length>1&&void 0!==c[1]?c[1]:0,r=c.length>2&&void 0!==c[2]?c[2]:0,o=c.length>3&&void 0!==c[3]?c[3]:1,i=n;case 5:if(!(i<r)){t.next=11;break}return t.next=8,e[i];case 8:i+=o,t.next=5;break;case 11:case"end":return t.stop()}},t)})}},l=(n(605),n(7)),h=Object(l.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("table",{staticClass:"table table-bordered table-hover table-sm mx-auto w-100 table-responsive-sm"},[n("thead",[n("tr",[n("th",{attrs:{scope:"col"}},[t._v("#")]),t._v(" "),n("th",{staticClass:"clickable",attrs:{scope:"col"},on:{click:function(e){return t.changeSortOrder("name")}}},[n("span",{staticClass:"d-inline-flex flex-row"},[n("span",{staticClass:"align-self-end"},[t._v("\n              Name\n              "),n("span",{staticClass:"arrow",class:t.getArrowClass("name")})]),t._v(" "),n("SearchButton",{staticStyle:{"z-index":"1","margin-left":"3px"},nativeOn:{click:function(t){t.stopPropagation()}}})],1)]),t._v(" "),n("th",{staticClass:"clickable",attrs:{scope:"col"},on:{click:function(e){return t.changeSortOrder("data")}}},[t._v("\n          "+t._s(t.dataColumnName)+"\n          "),n("span",{staticClass:"arrow",class:t.getArrowClass("data")})])])]),t._v(" "),n("tbody",t._l(t.pageData,function(e,i){return n("tr",{key:e.name,class:t.highlight_class(e.name)},[n("th",{attrs:{scope:"row"}},[t._v(t._s(i+1+t.offset))]),t._v(" "),n("td",[t._v("\n          "+t._s(e?"player1"===e.name?t.user.displayName:e.name:"undefined")+"\n        ")]),t._v(" "),n("td",[t._v(t._s(t.getData(e).toFixed(2)))])])}),0)]),t._v(" "),n("div",{staticClass:"d-flex justify-content-center w-100"},[t.isPagination?n("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage,"aria-controls":"rank-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1)])},[],!1,null,"f7811194",null).exports,d={name:"LocalRank",components:{RankTable:h},computed:{user:function(){return this.$store.state.user},player:function(){return this.$store.state.modules.playerAgents.agents.player1},playerRank:function(){return this.$store.state.modules.playerAgents.playerRank}},methods:{getScore:function(t){return t?parseFloat(t.score):0}}},f=Object(l.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.player?n("div",[n("p",[t._v("\n    Hello "+t._s(t.user.displayName)+", your score is\n    "+t._s(t.getScore(t.player).toFixed(2))+", your local rank is "+t._s(t.playerRank)+",\n    and your total spending is $"+t._s(t.player.totalSpending)+"\n  ")]),t._v(" "),n("RankTable",{attrs:{"data-column-name":"Score","get-data":t.getScore,"is-pagination":!0}})],1):n("div",[t._v("\n  There is no data available.\n")])},[],!1,null,"1c1de826",null).exports,m=n(5),v=n(65),y={name:"GlobalRank",components:{RankTable:h,Blocker:n(66).a,LoadingSpinner:v.a},data:function(){return{blocking:!1}},computed:{agents:function(){return this.$store.state.globalRankTable}},mounted:function(){var t=Object(m.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$waitForNuxt;case 2:0===this.agents.length&&this.getRank();case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{getScore:function(t){return t?parseFloat(t.score):0},getRank:function(){var t=this;return this.blocking=!0,this.$getGlobalRank().then(function(e){t.$store.commit("setGlobalRankTable",e),t.$store.commit("persistData"),t.blocking=!1})}}},k={name:"Index",components:{LocalRank:f,GlobalRank:Object(l.a)(y,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("RankTable",{attrs:{"data-column-name":"Score","get-data":t.getScore,"agents-prop":t.agents}}),t._v(" "),n("div",{staticClass:"d-flex w-100"},[n("button",{staticClass:"ml-auto btn btn-primary",on:{click:t.getRank}},[t._v("Refresh")])]),t._v(" "),t.blocking?n("LoadingSpinner"):t._e(),t._v(" "),t.blocking?n("Blocker"):t._e()],1)},[],!1,null,"a8a490c4",null).exports},methods:{uploadScore:function(){return this.$functions.useFunctionsEmulator("http://localhost:5001"),this.$uploadScore({username:"tester",uid:this.$store.state.user.uid,score:1233,localRank:12})}}},_=Object(l.a)(k,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("no-ssr",[e("b-tabs",{attrs:{"content-class":"mt-3",justified:"","active-nav-item-class":["bg-info","text-light","text-active"]}},[this.$store.state.modules.playerAgents.agents.player1&&!this.$store.state.gameStatus?e("b-tab",{attrs:{title:"Local Rank"}},[e("LocalRank")],1):this._e(),this._v(" "),e("b-tab",{attrs:{title:"Global Rank"}},[e("GlobalRank")],1)],1),this._v(" "),e("p",{attrs:{slot:"placeholder"},slot:"placeholder"},[this._v("Loading")])],1)],1)},[],!1,null,"501be16c",null);e.default=_.exports}}]);